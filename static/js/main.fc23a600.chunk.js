(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){},18:function(e,t,n){e.exports={dialogsPage:"Dialogs_dialogsPage__2UoGu",listOfDialogs:"Dialogs_listOfDialogs__2u3vd",messages:"Dialogs_messages__2Kfyq",dialogItem:"Dialogs_dialogItem__1Pfrt",dialogItemImg:"Dialogs_dialogItemImg__2Ze_t",dialogItemName:"Dialogs_dialogItemName__BAnLi",newmessage:"Dialogs_newmessage__1jgut",message:"Dialogs_message__Fan2n",messageName:"Dialogs_messageName__73xmM",messageBody:"Dialogs_messageBody__OBAnn",back:"Dialogs_back__l_GBD",sendform:"Dialogs_sendform__14Fsg",sendinput:"Dialogs_sendinput__PSWZ7",sendbutton:"Dialogs_sendbutton__3s73u"}},289:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(62),c=n.n(a),i=(n(159),n(5)),o=n(29),l=n(30),u=n(33),j=n(32),d=(n(160),n(12)),b=n(14),p=n(13),h=(n(69),n(8)),f=n.n(h),O=n(15),m=n(123),g=n.n(m).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"b227e61c-7fce-4acc-ab37-96baa228101e"}}),x=function(){return g.get("auth/me")},v=function(e,t,n,s){return g.post("auth/login",{email:e,password:t,rememberMe:n,captcha:s})},_=function(){return g.post("auth/logout")},w=function(e){return g.get("profile/".concat(e))},N=function(e){return g.put("/profile",e)},D=function(e){return g.get("/follow/".concat(e))},y=function(e){return g.post("/follow/".concat(e))},I=function(e){return g.delete("/follow/".concat(e))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return g.get("/users?page=".concat(e,"&count=").concat(t))},k=function(e){return g.post("/follow/".concat(e))},U=function(e){return g.delete("/follow/".concat(e))},P=function(e){return g.put("dialogs/".concat(e))},A=function(){return g.get("dialogs")},C=function(e){return g.get("dialogs/".concat(e,"/messages"))},F=function(e,t){return g.post("dialogs/".concat(e,"/messages"),{body:t})},E=n(23),L="AUTH/SET_USER_DATA",T="AUTH/DELETE_USER_DATA",M=function(e,t,n){return{type:L,payload:{email:e,login:t,userID:n}}},z=function(){return function(){var e=Object(O.a)(f.a.mark((function e(t){var n,s,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:0===(n=e.sent).data.resultCode&&(s=n.data.data,r=s.email,a=s.login,c=s.id,t(M(r,a,c)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R={isAuth:!1,userID:null,login:null,email:null,capthaURL:null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(i.a)(Object(i.a)(Object(i.a)({},e),t.payload),{},{isAuth:!0});case T:return Object(i.a)(Object(i.a)({},e),{},{isAuth:!1,userID:null,login:null,email:null,capthaURL:null});default:return Object(i.a)({},e)}},G=(n(185),n(0)),W=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logOut:function(){return function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,_();case 3:0===e.sent.data.resultCode&&t({type:T});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)("div",{className:"navbar-fixed",children:Object(G.jsx)("nav",{className:"cyan lighten-3",children:Object(G.jsx)("div",{className:"container",children:Object(G.jsxs)("div",{className:"nav-wrapper",children:[Object(G.jsx)("h5",{className:"left",children:"Social Network"}),Object(G.jsx)("ul",{className:"right hide-on-med-and-down",children:e.isAuth?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("li",{children:Object(G.jsx)("span",{children:e.login})}),Object(G.jsx)("li",{children:Object(G.jsx)("div",{onClick:e.logOut,children:"log out"})})]}):Object(G.jsx)("li",{children:Object(G.jsx)(b.b,{to:"/login",children:"Log in"})})})]})})})})})})),J=function(){return Object(G.jsx)("div",{className:"sidebar",children:Object(G.jsxs)("ul",{children:[Object(G.jsx)("li",{children:Object(G.jsx)(b.b,{to:"/profile",children:"Profile"})}),Object(G.jsx)("li",{children:Object(G.jsx)(b.b,{to:"/users",children:"Users"})}),Object(G.jsx)("li",{children:Object(G.jsx)(b.b,{to:"/dialogs",children:"Dialogs"})})]})})},q="DIALOGS/SET_LIST_OF_DIALOGS",V="DIALOGS/SET_MESSAGES",Y=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,P(e);case 3:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Z=function(e,t){return function(){var n=Object(O.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e,t);case 2:n.sent,s(H(e)),s(Object(E.a)("newmessage"));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},H=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){var s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:s=t.sent,n((r=s.data,{type:V,messages:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},X={listOfDialogs:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(i.a)(Object(i.a)({},e),{},{listOfDialogs:t.list});case V:return Object(i.a)(Object(i.a)({},e),{},{messages:t.messages});default:return Object(i.a)({},e)}},Q=n(18),$=n.n(Q),ee=function(e){var t=e.listOfDialogs;return 0==t.length?Object(G.jsx)("div",{children:"0 dialogs, start chatting now!"}):Object(G.jsxs)("div",{className:$.a.dialogsPage,children:[Object(G.jsx)("h5",{children:"Dialogs Page"}),t.map((function(e){return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("div",{className:$.a.dialogItem,children:[Object(G.jsx)("div",{className:$.a.dialogItemImg,children:Object(G.jsx)(b.b,{to:"/profile/".concat(e.id),children:Object(G.jsx)("img",{src:e.photos.small?e.photos.small:"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png",alt:""})})}),Object(G.jsx)("div",{className:$.a.dialogItemName,children:Object(G.jsx)(b.b,{to:"/dialogs/".concat(e.id),children:Object(G.jsx)("h5",{children:e.userName})})})]},e.id)})}))]})},te=function(){return Object(G.jsx)(G.Fragment,{children:"Loading..."})},ne=n(124),se=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getListOfDialogs(),this.refreshDialogData();this.props.match.params.userID}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userID!=e.match.params.userID&&this.refreshDialogData()}},{key:"refreshDialogData",value:function(){var e=ne.parse(this.props.location.search);e.pm&&this.props.getMessages(e.pm)}},{key:"render",value:function(){return this.props.listOfDialogs?Object(G.jsx)("div",{children:Object(G.jsx)(ee,{listOfDialogs:this.props.listOfDialogs})}):Object(G.jsx)(te,{})}}]),n}(r.a.Component),re=Object(d.b)((function(e){return{listOfDialogs:e.dialogs.listOfDialogs,messages:e.dialogs.messages}}),{getListOfDialogs:function(){return function(){var e=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:n=e.sent,t((s=n.data,{type:q,list:s}));case 4:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}()},getMessages:H,sendMessage:Z,startDialog:Y})(se),ae=n(11),ce="USERS/SET_IS_INITIALIZE_APP",ie="USERS/SET_FOLLOW_STATUS",oe=function(e){return{type:ie,following:e}},le=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){var s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:s=t.sent,n((r=s.data,{type:ce,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},ue={profile:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case ie:return Object(i.a)(Object(i.a)({},e),{},{following:t.following});default:return Object(i.a)({},e)}},de=n(42),be=n(119),pe=n(118),he=function(e,t,n,s,r){return Object(G.jsx)(pe.a,Object(i.a)({placeholder:n,name:t,component:e,validate:s},r))},fe=n(7),Oe=n.n(fe),me=function(e){var t=Object(s.useState)(!1),n=Object(de.a)(t,2),r=n[0],a=n[1];return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("div",{className:Oe.a.profile,children:[Object(G.jsx)("div",{className:"avatar",children:e.profile.photos.large?Object(G.jsx)("img",{className:"z-depth-2 "+Oe.a.avatarimg,src:e.profile.photos.large,alt:""}):Object(G.jsx)("img",{className:"z-depth-2 "+Oe.a.avatarimg,src:"https://iruimbatam.com/img/no-user-image.jpg",alt:""})}),r?Object(G.jsx)(xe,{profile:e.profile,setEditMode:a,onSubmit:function(t){e.updateProfileUserData(t).then((function(){a(!1)}))},initialValues:e.profile}):Object(G.jsx)(ge,{profile:e.profile,setEditMode:a,isOwner:e.isOwner}),Object(G.jsxs)("div",{className:Oe.a.buttonsitem,children:[e.isOwner&&1!=r&&Object(G.jsx)("div",{className:Oe.a.buttonsitem,children:Object(G.jsx)("button",{className:"waves-effect cyan lighten-1 btn",onClick:function(){return a(!0)},children:"Edit Profile"})}),!e.isOwner&&Object(G.jsx)("div",{className:Oe.a.buttons,children:Object(G.jsxs)(b.b,{className:"waves-effect cyan lighten-2 btn",to:"/dialogs/".concat(e.userID),children:[Object(G.jsx)("i",{className:"material-icons left",children:"mail"}),"Send Message"]})}),!e.isOwner&&Object(G.jsx)(G.Fragment,{children:e.following?Object(G.jsx)("div",{className:Oe.a.buttonsitem,children:Object(G.jsxs)("button",{onClick:function(){return e.unFollowUser()},className:"waves-effect red lighten-3 btn",children:[Object(G.jsx)("i",{className:"material-icons left",children:"check"}),"unfollow"]})}):Object(G.jsx)("div",{className:Oe.a.buttonsitem,children:Object(G.jsxs)("button",{onClick:function(){return e.followUser()},className:"waves-effect cyan lighten-2 btn",children:[Object(G.jsx)("i",{className:"material-icons left",children:"check"}),"follow"]})})})]})]})})},ge=function(e){return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("div",{className:Oe.a.discription,children:[Object(G.jsxs)("div",{className:Oe.a.fullname,children:[Object(G.jsx)("div",{children:Object(G.jsx)("h2",{children:e.profile.fullName})}),Object(G.jsx)("div",{children:Object(G.jsx)("p",{children:"Status"})})]}),Object(G.jsxs)("div",{className:Oe.a.informationItem,children:[Object(G.jsx)("div",{className:Oe.a.iname,children:Object(G.jsx)("h5",{children:"About me"})}),Object(G.jsx)("div",{className:Oe.a.ivalue,children:Object(G.jsx)("p",{children:e.profile.aboutMe})})]}),Object(G.jsxs)("div",{className:Oe.a.informationItem,children:[Object(G.jsx)("div",{className:Oe.a.iname,children:Object(G.jsx)("h5",{children:"Looking for a job"})}),e.profile.lookingForAJob?Object(G.jsx)("div",{className:Oe.a.ivalue,children:Object(G.jsx)("p",{children:"Yes"})}):Object(G.jsx)("div",{className:Oe.a.ivalue,children:Object(G.jsx)("p",{children:"No"})})]}),e.profile.lookingForAJob&&Object(G.jsxs)("div",{className:Oe.a.informationItem,children:[Object(G.jsx)("div",{className:Oe.a.iname,children:Object(G.jsx)("h5",{children:"work skills"})}),Object(G.jsx)("div",{className:Oe.a.ivalue,children:Object(G.jsx)("p",{children:e.profile.lookingForAJobDescription})})]}),Object(G.jsxs)("div",{className:Oe.a.informationItem,children:[Object(G.jsx)("div",{className:Oe.a.iname,children:Object(G.jsx)("h5",{})}),Object(G.jsx)("div",{className:Oe.a.ivalue,children:Object(G.jsx)("p",{})})]}),Object(G.jsx)("h4",{children:"Contacts:"}),Object(G.jsxs)("div",{className:Oe.a.informationItem,children:[Object(G.jsx)("div",{className:Oe.a.iname,children:Object(G.jsx)("h5",{})}),Object(G.jsx)("div",{className:Oe.a.ivalue,children:Object(G.jsx)("p",{})})]}),Object.keys(e.profile.contacts).map((function(t){if(e.profile.contacts[t])return Object(G.jsxs)("div",{className:Oe.a.informationItem,children:[Object(G.jsx)("div",{className:Oe.a.iname,children:Object(G.jsx)("h5",{children:t})}),Object(G.jsx)("div",{className:Oe.a.ivalue,children:Object(G.jsx)("p",{children:e.profile.contacts[t]})})]})}))]})})},xe=Object(be.a)({form:"profileEdit"})((function(e){return Object(G.jsx)("div",{className:Oe.a.discription,children:Object(G.jsxs)("form",{onSubmit:e.handleSubmit,children:[e.error&&Object(G.jsxs)("div",{children:["error : ",e.error]}),Object(G.jsxs)("div",{children:[Object(G.jsx)("p",{children:"Full Name: "}),he("input","fullName","your full name")]}),Object(G.jsxs)("div",{children:["About me: ",he("input","aboutMe","about you")]}),Object(G.jsx)("div",{className:"switch",children:Object(G.jsxs)("label",{children:["Need work?",he("input","lookingForAJob",null,[],{type:"checkbox"}),Object(G.jsx)("span",{className:"lever"}),"Yes"]})}),Object(G.jsxs)("div",{children:["Your skills: ",he("input","lookingForAJobDescription","your work skills")]}),Object(G.jsx)("b",{children:"Contacts:"}),Object.keys(e.profile.contacts).map((function(e){return Object(G.jsx)("div",{children:he("input","contacts."+e,e)})})),Object(G.jsx)("button",{className:"waves-effect cyan lighten-1 btn",children:"Save"}),Object(G.jsx)("button",{className:"waves-effect red lighten-1 btn",type:"button",onClick:function(){e.setEditMode(!1)},children:"Cancel"})]})})})),ve=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={userID:null},s}return Object(l.a)(n,[{key:"refreshProfileUserData",value:function(){this.state.userID=this.props.match.params.userID,this.state.userID||(this.state.userID=this.props.authID),this.props.getProfileUserData(this.state.userID),this.props.checkFollow(this.state.userID)}},{key:"componentDidMount",value:function(){this.refreshProfileUserData()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userID!=e.match.params.userID&&this.refreshProfileUserData()}},{key:"render",value:function(){return this.props.profile?Object(G.jsx)("div",{children:Object(G.jsx)(me,{profile:this.props.profile,isOwner:this.state.userID==this.props.authID,userID:this.state.userID,updateProfileUserData:this.props.updateProfileUserData,following:this.props.following,followUser:this.props.followUser,unFollowUser:this.props.unFollowUser})}):Object(G.jsx)(te,{})}}]),n}(r.a.Component),_e=Object(ae.d)(Object(d.b)((function(e){return{authID:e.auth.userID,profile:e.profile.profile,following:e.profile.following}}),{getProfileUserData:le,updateProfileUserData:function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n,s){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s().auth.userID,t.next=3,N(e);case 3:if(0!=(a=t.sent).data.resultCode){t.next=10;break}n(le(r)),t.next=12;break;case 10:return n(Object(E.b)("profileEdit",{_error:a.data.messages})),t.abrupt("return",Promise.reject(a.data.messages));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},checkFollow:function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){var s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e);case 2:s=t.sent,n(oe(s.data));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},followUser:function(){return function(){var e=Object(O.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n().profile.profile.userId,e.next=3,y(s);case 3:e.sent,t(oe(!0));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},unFollowUser:function(){return function(){var e=Object(O.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n().profile.profile.userId,e.next=4,I(s);case 4:e.sent,t(oe(!1));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}))(ve),we="APP/SET_IS_INITIALIZE_APP",Ne={isInitialized:!1},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(i.a)(Object(i.a)({},e),{},{isInitialized:!0});default:return Object(i.a)({},e)}},ye=Object(be.a)({form:"login"})((function(e){return Object(G.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(G.jsx)("div",{children:Object(G.jsx)(pe.a,{placeholder:"your email",type:"text",component:"input",name:"email"})}),Object(G.jsx)("div",{children:Object(G.jsx)(pe.a,{placeholder:"your password",type:"password",component:"input",name:"password"})}),Object(G.jsxs)("div",{children:["Remember you?",Object(G.jsx)(pe.a,{placeholder:"remember you/",type:"checkbox",component:"input",name:"rememberMe"})]}),e.error&&Object(G.jsx)("div",{children:"wrong e-mail/login"}),Object(G.jsx)("button",{children:"Log in"})]})})),Ie=Object(ae.d)(Object(d.b)((function(e){return{isAuth:e.auth.isAuth}}),{logIn:function(e,t,n,s){return function(){var r=Object(O.a)(f.a.mark((function r(a){var c,i;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(e,t,n,s);case 2:0===(c=r.sent).data.resultCode?a(z()):(c.data.resultCode,i=c.data.messages.length>0?c.data.messages[0]:"some error",a(Object(E.b)("login",{_error:i})));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}))((function(e){return 1==e.isAuth?Object(G.jsx)(p.a,{to:"/profile"}):Object(G.jsxs)(G.Fragment,{children:["login s",Object(G.jsx)(ye,{onSubmit:function(t){var n=t.email,s=t.password,r=t.rememberMe,a=t.captcha;e.logIn(n,s,r,a)}})]})})),Se=n(129),ke=function(e,t,n,s){return e.map((function(e){return e[t]==n?Object(i.a)(Object(i.a)({},e),s):e}))},Ue="USERS/SET_USERS",Pe="USERS/FOLLOW",Ae="USERS/UNFOLLOW",Ce="USERS/ADD_TO_FOLLOWING_LIST",Fe="USERS/REMOVE_FROM_FOLLOWING_LIST",Ee="USERS/SET_CURRENT_PAGE",Le=function(e){return{type:Ce,userId:e}},Te=function(e){return{type:Fe,userId:e}},Me={users:[],pageSize:10,currentPage:1,totalCount:null,followingUsers:[]},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(i.a)(Object(i.a)({},e),{},{users:t.users,totalCount:t.totalCount});case Ee:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.page});case Pe:return Object(i.a)(Object(i.a)({},e),{},{users:ke(e.users,"id",t.userId,{followed:!0})});case Ae:return Object(i.a)(Object(i.a)({},e),{},{users:ke(e.users,"id",t.userId,{followed:!1})});case Ce:return Object(i.a)(Object(i.a)({},e),{},{followingUsers:[].concat(Object(Se.a)(e.followingUsers),[t.userId])});case Fe:return Object(i.a)(Object(i.a)({},e),{},{followingUsers:e.followingUsers.filter((function(e){return e!=t.userId}))});default:return Object(i.a)({},e)}},Re=n(67),Be=n.n(Re),Ge=function(e){return Object(G.jsxs)("div",{className:Be.a.userdiv,children:[Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:Be.a.avatar,children:Object(G.jsx)(b.b,{to:"/profile/"+e.id,children:Object(G.jsx)("img",{src:e.photo?e.photo:"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png",alt:""})})}),Object(G.jsxs)("div",{className:Be.a.username,children:["Name: ",e.name]})]}),Object(G.jsx)("div",{children:"s"}),Object(G.jsx)("div",{children:Object(G.jsxs)("i",{children:["status: ",e.status]})}),e.followed?Object(G.jsx)("button",{disabled:e.followingUsers.some((function(t){return t==e.id})),onClick:function(){return e.unFollowUser(e.id)},children:"Unfollow"}):Object(G.jsx)("button",{disabled:e.followingUsers.some((function(t){return t==e.id})),onClick:function(){return e.followUser(e.id)},children:"Follow"}),Object(G.jsx)("hr",{})]})},We=n(127),Je=(n(289),function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,a=e.portionSize,c=void 0===a?10:a,i=Object(We.a)(e,["totalItemsCount","pageSize","currentPage","portionSize"]),o=Math.ceil(t/n),l=[],u=1;u<=o;u++)l.push(u);var j=Object(s.useState)(1),d=Object(de.a)(j,2),b=d[0],p=d[1],h=Math.ceil(o/c),f=(b-1)*c+1,O=b*c;return Object(G.jsxs)("span",{children:[f>1&&Object(G.jsx)("button",{onClick:function(){return p(1)},children:"<<<"}),f>1&&Object(G.jsx)("button",{onClick:function(){return p(b-1)},children:"<"}),l.filter((function(e){return e<=O&&e>=f})).map((function(e){return Object(G.jsxs)("span",{onClick:function(){return i.onPageChanged(e)},children:[e==r?Object(G.jsxs)("b",{children:[e," "]}):e," "]})})),b<h&&Object(G.jsx)("button",{onClick:function(){p(b+1)},children:">"}),b<h&&Object(G.jsx)("button",{onClick:function(){p(h)},children:">>>"})]})}),qe=function(e){return Object(G.jsx)("div",{children:e.users.map((function(t){return Object(G.jsx)(Ge,{name:t.name,id:t.id,status:t.status,photo:t.photos.small,followed:t.followed,followUser:e.followUser,unFollowUser:e.unFollowUser,followingUsers:e.followingUsers})}))})},Ve=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"componentDidUpdate",value:function(e,t,n){this.props.currentPage!=e.currentPage&&this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return this.props.users?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Je,{totalItemsCount:this.props.totalCount,currentPage:this.props.currentPage,pageSize:this.props.pageSize,onPageChanged:this.props.setCurrentPage}),Object(G.jsx)(qe,{users:this.props.users,unFollowUser:this.props.unFollowUser,followUser:this.props.followUser,followingUsers:this.props.followingUsers})]}):Object(G.jsx)(te,{})}}]),n}(r.a.Component),Ye=Object(ae.d)(Object(d.b)((function(e){return{users:e.users.users,totalCount:e.users.totalCount,pageSize:e.users.pageSize,currentPage:e.users.currentPage,followingUsers:e.users.followingUsers}}),{getUsers:function(e,t){return function(){var n=Object(O.a)(f.a.mark((function n(s){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S(e,t);case 2:r=n.sent,s((a=r.data.items,c=r.data.totalCount,{type:Ue,users:a,totalCount:c}));case 5:case"end":return n.stop()}var a,c}),n)})));return function(e){return n.apply(this,arguments)}}()},setCurrentPage:function(e){return{type:Ee,page:e}},followUser:function(e){return function(t){t(Le(e)),k(e).then((function(){t(Te(e)),t(function(e){return{type:Pe,userId:e}}(e))}))}},unFollowUser:function(e){return function(t){t(Le(e)),U(e).then((function(){t(Te(e)),t(function(e){return{type:Ae,userId:e}}(e))}))}}}))(Ve),Ze=Object(be.a)({form:"newmessage"})((function(e){var t=null;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(b.b,{to:"/dialogs",children:Object(G.jsx)("div",{className:$.a.back+" valign-wrapper",children:Object(G.jsx)("i",{className:"material-icons",children:"arrow_back"})})}),0==e.messages.items.length?Object(G.jsx)("div",{className:"center-align",children:"your messages will be here"}):Object(G.jsx)(G.Fragment,{children:e.messages.items.map((function(e){return e.senderId!=t?(t=e.senderId,Object(G.jsxs)("div",{className:$.a.message,children:[Object(G.jsxs)("div",{className:$.a.messageName,children:[e.senderName,":"]})," ",Object(G.jsx)("span",{className:$.a.messageBody,children:e.body})]},e.id)):Object(G.jsx)("div",{className:$.a.message,children:Object(G.jsx)("span",{className:$.a.messageBody,children:e.body})},e.id)}))}),Object(G.jsx)("div",{className:$.a.newmessage,children:Object(G.jsxs)("form",{onSubmit:e.handleSubmit,className:$.a.sendform,children:[Object(G.jsx)("div",{className:$.a.sendinput,children:Object(G.jsx)(pe.a,{name:"messageBody",component:"input",type:"text"})}),Object(G.jsx)("div",{className:$.a.sendbutton,children:Object(G.jsx)("button",{class:"btn-small waves-effect cyan lighten-2",children:"send"})})]})})]})})),He=Object(d.b)((function(e){return{messages:e.dialogs.messages}}),{getMessages:H,sendMessage:Z,startDialog:Y})((function(e){var t=Object(s.useState)(e.match.params.userID),n=Object(de.a)(t,2),r=n[0];n[1];Object(s.useEffect)((function(){e.getMessages(r)}),[e.match.params.userID]);return e.messages?Object(G.jsx)(Ze,{onSubmit:function(t){e.sendMessage(r,t.messageBody)},messages:e.messages}):Object(G.jsx)(te,{})})),Xe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.isInitialized?Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(b.a,{children:[Object(G.jsx)(W,{}),Object(G.jsx)("div",{className:"appwrapper",children:Object(G.jsx)("div",{className:"container mycontainer",children:Object(G.jsxs)("div",{className:"app",children:[Object(G.jsx)(J,{}),Object(G.jsx)("div",{className:"content",children:Object(G.jsxs)(p.d,{children:[Object(G.jsx)(p.b,{exact:!0,path:"/",children:Object(G.jsx)(p.a,{to:"/profile"})}),Object(G.jsx)(p.b,{exact:!0,path:"/dialogs",render:function(e){return Object(G.jsx)(re,Object(i.a)({},e))}}),Object(G.jsx)(p.b,{path:"/dialogs/:userID",render:function(e){return Object(G.jsx)(He,Object(i.a)({},e))}}),Object(G.jsx)(p.b,{path:"/users",render:function(){return Object(G.jsx)(Ye,{})}}),Object(G.jsx)(p.b,{path:"/login",render:function(){return Object(G.jsx)(Ie,{})}}),Object(G.jsx)(p.b,{path:"/profile/:userID?",render:function(e){return Object(G.jsx)(_e,Object(i.a)({},e))}}),Object(G.jsx)(p.b,{path:"*",render:function(){return Object(G.jsx)("div",{children:"404 NOT FOUND"})}})]})})]})})}),Object(G.jsx)("footer",{className:"page-footer cyan lighten-3",children:Object(G.jsx)("div",{className:"container",children:Object(G.jsxs)("div",{className:"row",children:[Object(G.jsxs)("div",{className:"col l6 s12",children:[Object(G.jsx)("h5",{className:"white-text",children:"Social Network"}),Object(G.jsx)("p",{className:"grey-text text-lighten-4",children:"Front by A.Usmanov, Back by IT-kamasutra"})]}),Object(G.jsxs)("div",{className:"col l4 offset-l2 s12",children:[Object(G.jsx)("h5",{className:"white-text",children:"Links"}),Object(G.jsxs)("ul",{children:[Object(G.jsx)("li",{children:Object(G.jsx)("a",{className:"grey-text text-lighten-3",href:"https://github.com/anuritto/",children:"github"})}),Object(G.jsx)("li",{children:Object(G.jsx)("a",{className:"grey-text text-lighten-3",href:"https://social-network.samuraijs.com/",children:"API"})})]})]})]})})})]})}):Object(G.jsx)(te,{})}}]),n}(r.a.Component),Ke=Object(d.b)((function(e){return{isInitialized:e.app.isInitialized,isAuth:e.auth.isAuth}}),{initializeApp:function(){return function(e){var t=e(z());Promise.all([t]),t.then((function(){e({type:we})}))}},getUserData:z})(Xe),Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,291)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),a(e),c(e)}))},$e=n(128),et=n(120),tt=Object(ae.c)({auth:B,profile:je,app:De,users:ze,dialogs:K,form:et.a}),nt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ae.d,st=Object(ae.e)(tt,nt(Object(ae.a)($e.a)));c.a.render(Object(G.jsx)(r.a.StrictMode,{children:Object(G.jsx)(d.a,{store:st,children:Object(G.jsx)(Ke,{})})}),document.getElementById("root")),Qe()},67:function(e,t,n){e.exports={userdiv:"users_userdiv__2DNV5",avatar:"users_avatar__2ef45",username:"users_username__3XzyT"}},69:function(e,t,n){e.exports={AppWrapper:"App_AppWrapper__3LebR",header:"App_header__3D6-x",headerlogo:"App_headerlogo__1Wei2",headerright:"App_headerright__3p1pC",nav:"App_nav__2H88j",content:"App_content__15G9n"}},7:function(e,t,n){e.exports={profile:"Profile_profile__1Dv3B",avatar:"Profile_avatar__1aOkq",avatarimg:"Profile_avatarimg__qpUSs",fullname:"Profile_fullname__30ndC",discription:"Profile_discription__hu8_u",buttonsitem:"Profile_buttonsitem__L8k3_",informationItem:"Profile_informationItem__2qL_N",iname:"Profile_iname__1G0s0",ivalue:"Profile_ivalue__2ny6i"}}},[[290,1,2]]]);
//# sourceMappingURL=main.fc23a600.chunk.js.map